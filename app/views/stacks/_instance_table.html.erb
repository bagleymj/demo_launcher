<% if params[:action] == 'edit' %>
  <!-- Create a Form -->
<% end %>
<table class="table table-striped">
  <thead>
    <th>Name</th>
    <th>ID</th>
    <th>Boot Order</th>
    <th>Delay</th>
    <th>State</th>
    <th>Actions</th>
  </thead>
  <% list_length = @stack.instances.length %>
  <% @stack.instances.each do |instance| %>
    <tr>
      <td><%= get_instance_name instance.instance_id %>
      <td><%= instance.instance_id %></td>
      <% instance_state = get_instance_state(instance.instance_id) %>
      <td>
        <%= instance.boot_order %>
        <% if instance.boot_order != 1 %>
          <i class="fa fa-arrow-up"></i>
        <% end %>
        <% if instance.boot_order != list_length %>
          <i class="fa fa-arrow-down"></i>
        <% end %>
      </td>
      <td><%= instance.delay %></td>
      <td><%= instance_state %></td>
      <td>
        <% case instance_state %>
        <% when "stopped" %>
          <%= button_to "Start", {:action => 'start_instance', 
                                  :controller => :instances, 
                                  :id => instance.id, :stack_id => @stack.id}, 
                                  :method => :post, 
                                  class: 'btn btn-success' %>
        <% when "running" %>
          <%= button_to "Stop", {:action => 'stop_instance', 
                                 :controller => :instances, 
                                 :id => instance.id, :stack_id => @stack.id}, 
                                 :method => :post, 
                                 class: 'btn btn-danger' %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>
